#include <cstdio>

typedef float tgnumber;


enum numsearchstate
{
	looking,
	numbernext,
	innumber,
	afterdecimal
};

tgnumber atoitg (const char* textin)
{
	numsearchstate searchstate = looking;
	tgnumber retval = 0;
	tgnumber afterbit = 1;
	unsigned int current = 0;
	for(;;current++)
	{
		
	switch (textin[current])
	{
		default:
		 switch (searchstate)
		 {
		 	case (looking):
		 	
		 	break;
		 	default:
		 	return retval;
		 }
		break;
		
		case (0):
		return retval;
		
		case ('.'):
		switch (searchstate)
		 {
		 	case (looking):
		 	case (innumber):
		 	//change after decimal
		 	searchstate = afterdecimal;
		 	break;
		 	
		 	default:
		 	return retval;
		 }
		break;
		
	    case ('-'):
		 switch (searchstate)
		 {
		 	case (looking):
		 	//make it minus
		 	searchstate = numbernext;
		 	break;
		 	default:
		 	return retval;
		 }	    
		break;
		
		case ('0'):
		case ('1'):
		case ('2'):
		case ('3'):
		case ('4'):
		case ('5'):
		case ('6'):
		case ('7'):		
		case ('8'):
		case ('9'):
		tgnumber thisval = textin[current] - 48;
		switch (searchstate)
		 {
		 	case (looking):
		 	case (numbernext):
		 	searchstate = innumber;
		 	case (innumber):
		 	retval *=10;	
	    	 retval += thisval;
		 	break;
		 	
		 	case (afterdecimal):
		 	afterbit /= 10;
		 	retval += thisval * afterbit;
		 	break;
		 }
		break;
	}
  
   
	}
	return 0;
}


int main ()
{
	char mer[] = "56778.55768";
	float g = atoitg(mer);
	printf("%f",g);
}